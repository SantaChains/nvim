-- Krabby 配置选项
-- 可以通过修改这些变量来自定义 Krabby 的行为

-- 设置是否在启动时显示 Krabby（默认关闭）
vim.g.krabby_on_startup = false

-- Krabby 高级配置示例
-- 创建配置设置函数
local function setup_krabby_config()
  -- 检查是否安装了 Krabby
  if vim.fn.executable('krabby') == 0 then
    return false
  end
  
  -- 可以在这里添加更多配置选项
  vim.g.krabby_installed = true
  
  return true
end

-- 初始化配置
setup_krabby_config()

-- 提供便捷的配置切换函数
function KrabbyQuickSetup()
  print("🦀 Krabby 快速设置:")
  print("1. 安装 Krabby: cargo install krabby")
  print("2. 启用启动画面: vim.g.krabby_on_startup = true")
  print("3. 使用命令:")
  print("   • :Krabby - 显示画面")
  print("   • :KrabbyToggle - 切换启动显示")
  print("   • <leader>Dk - 快捷显示")
  print("   • <leader>Dt - 快捷切换")
  
  local choice = vim.fn.confirm(
    "是否现在启用 Krabby 启动画面？",
    "&是\n&否",
    2
  )
  
  if choice == 1 then
    vim.g.krabby_on_startup = true
    vim.notify("🦀 Krabby 启动画面已启用！重启 Neovim 生效", vim.log.levels.INFO)
  end
end

-- 注册快速设置命令
vim.api.nvim_create_user_command('KrabbyQuickSetup', KrabbyQuickSetup, {
  desc = '🦀 Krabby 快速设置向导'
})

return {
  -- 返回配置状态
  enabled = vim.g.krabby_installed or false,
  startup = vim.g.krabby_on_startup or false,
}